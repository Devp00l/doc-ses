<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="ceph.install.calamari">
 <title>Calamari</title>
 <para>
  Calamari is a management and monitoring system for &ceph; storage cluster. It
  provides a Web user interface that makes &ceph; cluster monitoring very
  simple and handy.
 </para>
 <para>
  The Calamari installation procedure differs according to the used deployment
  procedure. If you deployed your
  cluster by using &crow;, refer to
  <xref linkend="crowbar.calamari.installation"/>.
 </para>
 <sect1 xml:id="crowbar.calamari.installation">
  <title>Installing Calamari Using &crow;</title>

  <note>
   <title>Conflicts in Combination with Deployment using &crow;</title>
   <para>
    If you used &crow; to install &storage;, install Calamari on a different
    server than &crow; as &crow; uses the same port as Calamari (port 80).
   </para>
  </note>

  <para>
   Use the &crow; UI to deploy Calamari as described in
   <xref linkend="sec.depl.ceph.ceph"/>.
  </para>
 </sect1>
 <sect1 xml:id="storage.bp.monitoring.calamari_usage_graphs">
  <title>Cluster Usage Monitoring using Calamari</title>

  <para>
   Besides other administration tasks you can perform by using Calamari, you
   can check usage of your cluster.
  </para>

  <para>
   At the bottom of the <guimenu>Dashboard</guimenu>&mdash;the home page of
   Calamari&mdash;there are two usage related boxes. While
   <guimenu>IOPS</guimenu> shows the cluster's overall number of input/output
   operations per second, the <guimenu>Usage</guimenu> graph shows the number
   of the cluster's total/used disk space.
  </para>

  <figure>
   <title>IOPS and Usage Graphs on Calamari Dashboard</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="calamari_iops_usage.png" width="80%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="calamari_iops_usage.png" width="60%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   You can find more detailed and interactive graphs after clicking the
   <guimenu>Charts</guimenu> menu item. It shows the cluster's overall
   input/output operations per second and free disk space by default. Select
   <guimenu>Pool IOPS</guimenu> from the top drop-down box to detail the view
   by existing pools.
  </para>

  <figure>
   <title>Pool IOPS Detailed View</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="calamari_mypool_iops.png" width="80%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="calamari_mypool_iops.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   By moving the slider in the <guimenu>Time Axis</guimenu> pane, you can
   change the displayed time interval in the graph. By moving the mouse over
   the graph, the time/read/write information changes accordingly. By clicking
   and dragging the mouse horizontally across the graph, the specified time
   interval gets zoomed. You can see more help by moving the mouse over the
   little question mark in the top right corner of the graph.
  </para>

  <para>
   If you select the host name of a specific &ceph; server, Calamari displays
   detailed information about CPU, average load, and memory related to the
   specified host.
  </para>

  <figure>
   <title>&ceph; Host Average Load</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="calamari_host_avgload.png" width="80%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="calamari_host_avgload.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
</chapter>
