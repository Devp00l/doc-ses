<?xml version="1.0" encoding="UTF-8"?>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:base="admin_gui_oa.xml" version="5.0" xml:id="ceph.oa">
 <title>openATTIC</title>
 <info>
      <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
        <dm:translation>是</dm:translation>
        <dm:release>SES 5</dm:release>
      </dm:docmanager>
    </info>
    <tip>
  <title>Calamari 已去除</title>
  <para>
   Calamari 曾是用于管理和监视 Ceph 群集的首选 Web UI 应用程序。但自 SUSE Enterprise Storage 5 开始，去除了 Calamari 而以更先进的 openATTIC 代替。
  </para>
 </tip>
 <para>
  openATTIC 是一个中央储存管理系统，可支持 Ceph 储存群集。借助 openATTIC，您可以从中央管理界面控制所有事宜。您不再需要熟悉 Ceph 储存工具的内部工作方式。群集管理任务可以使用 openATTIC 直观的 Web 界面或通过其 REST API 执行。
 </para>
 <sect1 xml:id="ceph.oa.installation">
  <title>openATTIC 部署和配置</title>

  <para>
   本节介绍部署和配置 openATTIC 及其支持的功能的步骤，以便您可以使用用户友好的 Web 界面来管理 Ceph 群集。
  </para>

  <sect2 xml:id="oa.deploy">
   <title>部署 openATTIC</title>
   <para>
    自 SUSE Enterprise Storage 5 开始，已采用 DeepSea 角色的形式来部署 openATTIC。有关一般过程，请参见<xref linkend="storage.salt.cluster"/>。
   </para>
  </sect2>

  <sect2 xml:id="ceph.oa.install.oa">
   <title>openATTIC 初始设置</title>
   <para>
    默认情况下，<command>oaconfig</command> 会使用与用户名相同的口令创建管理用户帐户 <systemitem>openattic</systemitem>。为安全起见，强烈建议立即更改此口令：
   </para>
<screen><prompt>root@minion &gt; </prompt>oaconfig changepassword openattic
Changing password for user 'openattic'
Password: &lt;enter password&gt;
Password (again): &lt;re-enter password&gt;
Password changed successfully for user 'openattic'
</screen>
  </sect2>

  <sect2 xml:id="oa.ds">
   <title>openATTIC 中的 DeepSea 集成</title>
   <para>
    一些 openATTIC 功能（例如 iSCSI 网关和对象网关管理）会使用 DeepSea REST API。默认情况下，会启用并配置该 API。如果您出于调试目的需要覆盖其默认设置，请编辑 <filename>/etc/sysconfig/openattic</filename>，添加或更改以下数行：
   </para>
<screen>SALT_API_HOST="<replaceable>salt_api_host</replaceable>"
SALT_API_PORT=8001
SALT_API_USERNAME="example_user"
SALT_API_PASSWORD="password"</screen>
   <important>
    <title><command>oaconfig restart</command></title>
    <para>
     在更改 <filename>/etc/sysconfig/openattic</filename> 文件之后，记得运行 <command>oaconfig restart</command>。
    </para>
   </important>
   <important>
    <title>文件语法</title>
    <para>
     在 Python 和 Bash 中也使用 <filename>/etc/sysconfig/openattic</filename>。因此，该文件需要采用 Bash 可以理解的格式，并且在“等号”前后不能有空格。
    </para>
   </important>
  </sect2>

  <sect2 xml:id="oa.rgw">
   <title>对象网关管理</title>
   <para>
    默认情况下，openATTIC 中的对象网关管理功能处于启用状态。如果您需要覆盖 DeepSea 中发现的对象网关 API 默认值，请在 <filename>/etc/sysconfig/openattic</filename> 中包括以下选项及相关值。例如：
   </para>
<screen>RGW_API_HOST="<replaceable>rgw_api_host</replaceable>"
RGW_API_PORT=80
RGW_API_SCHEME="http"
RGW_API_ACCESS_KEY="VFEG733GBY0DJCIV6NK0"
RGW_API_SECRET_KEY="lJzPbZYZTv8FzmJS5eiiZPHxlT2LMGOMW8ZAeOAq"</screen>
   <note>
    <title>对象网关的默认资源</title>
    <para>
     如果您的对象网关管理资源未配置为使用默认值“admin”（如在“http://rgw_host:80/admin”中所用），则还需要相应地设置 <option>RGW_API_ADMIN_RESOURCE</option> 选项。
    </para>
   </note>
   <para>
    要获取对象网关身份凭证，请使用 <command>radosgw-admin</command> 命令：
   </para>
<screen><prompt>root@minion &gt; </prompt>radosgw-admin user info --uid=admin</screen>
  </sect2>

  <sect2 xml:id="oa.igw">
   <title>iSCSI 网关管理</title>
   <para>
    默认情况下，openATTIC 中的 iSCSI 网关管理功能处于启用状态。如果您需要覆盖默认 Salt API 主机名，请更改 <option>SALT_API_HOST</option> 值，如<xref linkend="oa.ds"/>中所述。
   </para>
  </sect2>
 </sect1>
 <sect1 xml:id="ceph.oa.install.webui">
  <title>openATTIC Web 用户界面</title>

  <para>
   可使用 Web 用户界面管理 openATTIC。打开 Web 浏览器并导航到 http://www.example.org/openattic。要登录，请使用默认用户名 <emphasis>openattic</emphasis> 及相应的口令。
  </para>

  <figure>
   <title>openATTIC 登录屏幕</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_login.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_login.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   openATTIC 用户界面分为顶部菜单窗格和内容窗格两部分。
  </para>

  <para>
   顶部窗格的右侧包含当前用户设置的链接、<guimenu>注销</guimenu>链接和用于列出现有<guimenu>后台任务</guimenu>和系统<guimenu>通知</guimenu>的链接。顶部窗格的其余部分包含 openATTIC 主菜单。
  </para>

  <para>
   内容窗格会根据所激活的项目菜单而变化。默认情况下，会显示<guimenu>仪表板</guimenu>，其中包含许多控件，用以通知群集的状态。
  </para>

  <figure>
   <title>openATTIC 仪表板</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_dashboard.png" width="90%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_dashboard.png" width="90%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>
 </sect1>
 <sect1 xml:id="ceph.oa.webui.dash">
  <title>仪表板</title>

  <para>
   各<guimenu>仪表板</guimenu>控件显示与正在运行的 Ceph 群集相关的特定状态信息。单击某个控件的标题之后，该控件会扩展至整个内容窗格，可能会显示更多细节。下面列出几个控件：
  </para>

  <para>
   <guimenu>状态</guimenu>控件指示群集是否正常运作。如果检测到问题，可单击控件内的副标题来查看详细的错误讯息。
  </para>

  <para>
   <guimenu>仲裁中的监视器</guimenu>、<guimenu>池</guimenu>、<guimenu>输入的 OSD</guimenu>、<guimenu>输出的 OSD</guimenu>、<guimenu>启动的 OSD</guimenu>、<guimenu>关闭的 OSD</guimenu>和<guimenu>每个 OSD 的平均 PG 数</guimenu>控件仅显示相关数字。
  </para>

  <figure>
   <title>基本控件</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_basic_widgets.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_basic_widgets.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   下列控件用于处理总储存容量和可用储存容量：<guimenu>群集容量</guimenu>、<guimenu>可用容量</guimenu>、<guimenu>已使容量</guimenu>和<guimenu>容量</guimenu>。
  </para>

  <figure>
   <title>容量控件</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_capacity_widgets.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_capacity_widgets.png" width="75%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   下列控件用于处理 OSD 和监视器节点延迟：<guimenu>平均 OSD 应用延迟</guimenu>、<guimenu>平均 OSD 提交延迟</guimenu>和<guimenu>平均监视器延迟</guimenu>：
  </para>

  <figure>
   <title>延迟控件</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_latency_widgets.png" width="70%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_latency_widgets.png" width="70%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <para>
   <guimenu>吞吐量</guimenu>控件即时显示每秒的读取和写入统计数字。
  </para>

  <figure>
   <title>吞吐量</title>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_io.png" width="60%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_io.png" width="60%" format="PNG"/>
    </imageobject>
   </mediaobject>
  </figure>

  <tip>
   <title>鼠标悬停时显示更多细节</title>
   <para>
    如果您将鼠标指针移到任何显示的图表上方，会在弹出窗口中显示与所指日期和时间相关的更多细节。
   </para>
   <para>
    如果在图表区域中单击，然后沿时间轴向左或向右拖动鼠标指针，时间轴上的间隔将放大到您通过移动鼠标标记的间隔。要缩回原来的比例，请双击图表。
   </para>
  </tip>
 </sect1>
 <sect1 xml:id="ceph.oa.webui.ceph">
  <title>Ceph 相关任务</title>

  <para>
   openATTIC的 主菜单列出 Ceph 相关任务。目前有以下相关任务：<guimenu>OSD</guimenu>、<guimenu>RBD</guimenu>、<guimenu>池</guimenu>、<guimenu>节点</guimenu>、<guimenu>iSCSI</guimenu>、<guimenu>NFS</guimenu>、<guimenu>CRUSH 拓扑图</guimenu>和<guimenu>对象网关</guimenu>。
  </para>

  <sect2>
   <title>常用 Web UI 功能</title>
   <para>
    在 openATTIC 中，经常会使用<emphasis>列表</emphasis> — 例如，池列表、OSD 节点列表或 RBD 设备列表。下列常用控件可帮助您管理或调整这些列表：
   </para>
   <para>
    单击 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_reload.png" width="1.2em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 可刷新项目列表。
   </para>
   <para>
    单击 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_columns.png" width="1.3em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 可显示或隐藏个别表格列。
   </para>
   <para>
    单击 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_rows.png" width="1.8em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 并选择要在一页上显示多少行。
   </para>
   <para>
    在 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_search.png" width="5em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 中单击并键入要搜索的字符串以过滤行。
   </para>
   <para>
    如果列表跨多页显示，可使用 <inlinemediaobject>
    <imageobject role="fo">
     <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="oa_widget_pager.png" width="6em" format="PNG"/>
    </imageobject>
    </inlinemediaobject> 来更改当前显示的页。
   </para>
  </sect2>

  <sect2>
   <title>列出 OSD 节点</title>
   <para>
    要列出所有可用 OSD 节点，单击主菜单中的 <guimenu>OSD</guimenu>。
   </para>
   <para>
    列表会显示每个 OSD 的名称、主机名、状态、权重和储存后端。
   </para>
   <figure>
    <title>OSD 节点列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_osds.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_osds.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2>
   <title>管理 RADOS 块设备 (RBD)</title>
   <para>
    要列出所有可用的 RADOS 块设备，请单击主菜单中的 <guimenu>RBD</guimenu>。
   </para>
   <para>
    列表会显示每个设备的名称、相关池名称、设备大小和已占用百分比。
   </para>
   <figure>
    <title>RBD 列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbds.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbds.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    要查看有关设备的更详细信息，请激活其最左侧列中的复选框：
   </para>
   <figure>
    <title>RBD 细节</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rbd_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rbd_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3>
    <title>删除 RBD</title>
    <para>
     要删除某个设备或一组设备，请激活其最左侧列中的复选框，然后单击 RBD 表格左上方的<guimenu>删除</guimenu>：
    </para>
    <figure>
     <title>删除 RBD</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_rbd_delete.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_rbd_delete.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3>
    <title>添加 RBD</title>
    <para>
     要添加新设备，请单击 RBD 表格左上方的<guimenu>添加</guimenu>，然后在<guimenu>创建 RBD</guimenu> 屏幕上执行以下操作：
    </para>
    <figure>
     <title>添加新的 RBD</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_rbd_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_rbd_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       输入新设备的名称。有关命名限制，请参见<xref linkend="sysreq.naming"/>。
      </para>
     </step>
     <step>
      <para>
       选择要储存新池的群集。
      </para>
     </step>
     <step>
      <para>
       选择将在其中创建新 RBD 设备的池。
      </para>
     </step>
     <step>
      <para>
       指定新设备的大小。如果您单击上面的<guimenu>使用最大值</guimenu>链接，则会填充最大池大小。
      </para>
     </step>
     <step>
      <para>
       要细调设备参数，请单击<guimenu>专家设置</guimenu>，然后激活或停用所显示的选项。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>创建</guimenu>以确认。
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2>
   <title>管理池</title>
   <tip>
    <title>池的更多信息</title>
    <para>
     有关 Ceph 池的更多一般信息，请参见<xref linkend="ceph.pools"/>。有关纠删码池的特定信息，请参见<xref linkend="cha.ceph.erasure"/>。
    </para>
   </tip>
   <para>
    要列出所有可用的池，请单击主菜单中的<guimenu>池</guimenu>。
   </para>
   <para>
    列表会显示每个池的名称、ID、已用空间百分比、归置组数量、复本大小、类型（“副本”或“纠删”）、纠删码配置文件和 CRUSH 规则集。
   </para>
   <figure>
    <title>池列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    要查看有关池的更详细信息，请激活其最左侧列中的复选框：
   </para>
   <figure>
    <title>池细节</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_pools_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_pools_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3>
    <title>删除池</title>
    <para>
     要删除某个池或一组池，请激活其最左侧列中的复选框，然后单击池表格左上方的<guimenu>删除</guimenu>：
    </para>
    <figure>
     <title>删除池</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_pools_delete.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_pools_delete.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3>
    <title>添加池</title>
    <para>
     要添加新池，请单击池表格左上方的<guimenu>添加</guimenu>，然后在<guimenu>创建 Ceph 池</guimenu>屏幕上执行以下操作：
    </para>
    <figure>
     <title>添加新池</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_pools_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       输入新池的名称。有关命名限制，请参见<xref linkend="sysreq.naming"/>。
      </para>
     </step>
     <step>
      <para>
       选择要储存新池的群集。
      </para>
     </step>
     <step>
      <para>
       选择池类型。池可以是副本池或是纠删码池。
      </para>
     </step>
     <step>
      <substeps>
       <step>
        <para>
         对于副本池，请指定复本大小和归置组数。
        </para>
       </step>
       <step>
        <para>
         对于纠删码池，请指定归置组数和纠删码配置文件。您可以通过单击加号“+”并指定配置文件名、数据和编码大块以及规则集故障域，添加自定义配置文件。
        </para>
       </step>
      </substeps>
     </step>
     <step>
      <para>
       单击<guimenu>创建</guimenu>以确认。
      </para>
     </step>
    </procedure>
   </sect3>
  </sect2>

  <sect2 xml:id="ceph.oa.minions">
   <title>列出节点</title>
   <para>
    单击主菜单中的<guimenu>节点</guimenu>，可查看群集上可用的节点列表。
   </para>
   <figure>
    <title>节点列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_minion.png" width="70%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_minion.png" width="70%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    每个节点用其主机名、公共 IP 地址、它所属于的群集 ID、节点角色（例如“管理”、“储存”或“主控端”）和关键接受状态表示。
   </para>
  </sect2>

  <sect2 xml:id="oa.webui.nfs">
   <title>管理 NFS Ganesha</title>
   <tip>
    <title>NFS Ganesha 的更多信息</title>
    <para>
     有关 NFS Ganesha 的更多一般信息，请参见<xref linkend="cha.ceph.nfsganesha"/>。
    </para>
   </tip>
   <para>
    要列出所有可用的 NFS 导出，请单击主菜单中的 <guimenu>NFS</guimenu>。
   </para>
   <para>
    列表会显示每个导出的目录、主机名、状态、储存后端类型以及访问类型。
   </para>
   <figure>
    <title>NFS 导出列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    要查看有关 NFS 导出的更详细信息，请激活其最左侧列中的复选框：
   </para>
   <figure>
    <title>NFS 导出细节</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_nfs_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <tip>
    <title>NFS 装入命令</title>
    <para>
     在导出详细视图的底部，有一个装入命令，让您能轻松地装入来自客户端计算机的相关 NFS 导出。
    </para>
   </tip>
   <sect3>
    <title>添加 NFS 导出</title>
    <para>
     要添加新的 NFS 导出，请单击导出表格左上方的<guimenu>添加</guimenu>并输入所需的信息。
    </para>
    <figure>
     <title>添加新的 NFS 导出</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_nfs_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       选择 NFS 导出的服务器主机。
      </para>
     </step>
     <step>
      <para>
       选择储存后端 — <guimenu>CephFS</guimenu> 或<guimenu>对象网关</guimenu>。
      </para>
     </step>
     <step>
      <para>
       输入 NFS 导出的目录路径。如果该目录在服务器上不存在，将会予以创建。
      </para>
     </step>
     <step>
      <para>
       指定其他 NFS 相关的选项，例如支持的 NFS 协议版本、访问类型、权限压缩或传输协议。
      </para>
     </step>
     <step>
      <para>
       如果您需要将访问权限制为仅限特定客户端，请单击<guimenu>添加客户端</guimenu>并添加它们的 IP 地址以及访问类型和权限压缩选项。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>提交</guimenu>以确认。
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3>
    <title>克隆和删除 NFS 导出</title>
    <para>
     要删除某个导出或一组导出，请激活其最左侧列中的复选框，然后单击网关表格左上方的<guimenu>删除</guimenu>。
    </para>
    <para>
     同样，您可以选择<guimenu>克隆</guimenu>以克隆激活的网关。
    </para>
   </sect3>
   <sect3>
    <title>编辑 NFS 导出</title>
    <para>
     要编辑现有导出，可单击其在导出表格中的名称，也可以激活相应复选框，然后单击网关表格左上方的<guimenu>编辑</guimenu>。
    </para>
    <para>
     然后，您可以调整 NFS 导出的所有细节。
    </para>
    <figure>
     <title>编辑 NFS 导出</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_nfs_edit.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
  </sect2>

  <sect2 xml:id="oa.webui.iscsi">
   <title>管理 iSCSI 网关</title>
   <tip>
    <title>iSCSI 网关的更多信息</title>
    <para>
     有关 iSCSI 网关的更多一般信息，请参见<xref linkend="cha.ceph.as.iscsi"/>和<xref linkend="cha.ceph.iscsi"/>。
    </para>
   </tip>
   <para>
    要列出所有可用网关，请单击主菜单中的 <guimenu>iSCSI</guimenu>。
   </para>
   <para>
    列表会显示每个网关的目标、状态、相关门户和 RBD 映像。
   </para>
   <figure>
    <title>iSCSI 网关列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_igws.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_igws.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    要查看有关网关的更详细信息，请激活其最左侧列中的复选框：
   </para>
   <figure>
    <title>网关细节</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_igws_status.png" width="40%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3>
    <title>添加 iSCSI 网关</title>
    <para>
     要添加新的 iSCSI 网关，请单击网关表格左上方的<guimenu>添加</guimenu>并输入所需的信息。
    </para>
    <figure>
     <title>添加新的 iSCSI 网关</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_igws_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       输入新网关的目标地址。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>添加门户</guimenu>并从列表中选择一个或多个 iSCSI 门户。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>添加映像</guimenu>并为网关选择一个或多个 RBD 映像。
      </para>
     </step>
     <step>
      <para>
       如果您需要使用身份验证才能访问网关，请激活<guimenu>身份验证</guimenu>复选框并输入身份凭证。激活<guimenu>相互身份验证</guimenu>和<guimenu>发现身份验证</guimenu>之后，可找到更多高级身份验证选项。
      </para>
     </step>
     <step>
      <para>
       单击<guimenu>提交</guimenu>以确认。
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3>
    <title>编辑 iSCSI 网关</title>
    <para>
     要编辑现有 iSCSI 网关，可单击其在网关表格中的名称，也可以激活相应复选框，然后单击网关表格左上方的<guimenu>编辑</guimenu>。
    </para>
    <para>
     然后，您可以修改 iSCSI 目标，添加或删除门户，以及添加或删除相关 RBD 映像。您还可以调整网关的身份验证信息。
    </para>
   </sect3>
   <sect3>
    <title>克隆和删除 iSCSI 网关</title>
    <para>
     要删除某个网关或一组网关，请激活其最左侧列中的复选框，然后单击网关表格左上方的<guimenu>删除</guimenu>。
    </para>
    <para>
     同样，您可以选择<guimenu>克隆</guimenu>以克隆激活的网关。
    </para>
   </sect3>
   <sect3>
    <title>启动和停止 iSCSI 网关</title>
    <para>
     要启动所有网关，请选择网关表格左上方的<guimenu>全部启动</guimenu>。要停止所有网关，请选择<guimenu>全部停止</guimenu>。
    </para>
   </sect3>
  </sect2>

  <sect2 xml:id="ceph.oa.crushmap">
   <title>查看群集 CRUSH 拓扑图</title>
   <para>
    单击主菜单中的 <guimenu>CRUSH 拓扑图</guimenu>可查看群集 CRUSH 拓扑图。
   </para>
   <figure>
    <title>CRUSH 拓扑图</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_crush.png" width="60%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_crush.png" width="60%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <para>
    在<guimenu>物理设置</guimenu>窗格中，可以查看群集的结构，如“CRUSH 拓扑图”中所述。
   </para>
   <para>
    在<guimenu>复制规则</guimenu>窗格中，可以从<guimenu>内容</guimenu>下拉框中选择其中一个规则集后查看个别规则集。
   </para>
   <figure>
    <title>复制规则</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_crush_rulesets.png" width="60%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_crush_rulesets.png" width="60%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect2>

  <sect2 xml:id="oa.webui.rgw_users">
   <title>管理对象网关用户和桶</title>
   <tip>
    <title>对象网关的更多信息</title>
    <para>
     有关对象网关的更多一般信息，请参见<xref linkend="cha.ceph.gw"/>。
    </para>
   </tip>
   <para>
    要列出对象网关用户，请选择主菜单中的<menuchoice><guimenu>对象网关</guimenu><guimenu>用户</guimenu></menuchoice>。
   </para>
   <para>
    列表会显示每个用户的 ID、显示名称、电子邮件地址、用户是否处于暂停状态以及用户的最大桶数。
   </para>
   <figure>
    <title>对象网关用户列表</title>
    <mediaobject>
     <imageobject role="fo">
      <imagedata fileref="oa_rgw_users_list.png" width="90%" format="PNG"/>
     </imageobject>
     <imageobject role="html">
      <imagedata fileref="oa_rgw_users_list.png" width="90%" format="PNG"/>
     </imageobject>
    </mediaobject>
   </figure>
   <sect3 xml:id="oa.rgw_user.add">
    <title>添加新的对象网关用户</title>
    <para>
     要添加新的对象网关用户，请单击用户表格左上方的<guimenu>添加</guimenu>并输入相关信息。
    </para>
    <tip>
     <title>更多信息</title>
     <para>
      可在<xref linkend="s3.swift.accounts.managment"/>中了解有关对象网关用户帐户的更多信息。
     </para>
    </tip>
    <figure>
     <title>添加新的对象网关用户</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_rgw_users_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_rgw_users_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <procedure>
     <step>
      <para>
       输入用户名、全名和（可选）电子邮件地址以及用户的最大桶数。
      </para>
     </step>
     <step>
      <para>
       如果用户最初应处于暂停状态，请激活<guimenu>暂停</guimenu>复选框。
      </para>
     </step>
     <step>
      <para>
       指定 S3 身份验证的访问密钥和机密密钥。如果您希望 openATTIC 为您生成密钥，请激活<guimenu>生成密钥</guimenu>。
      </para>
     </step>
     <step>
      <para>
       在<guimenu>用户配额</guimenu>部分中，设置当前用户的配额限制。
      </para>
      <para>
       选中<guimenu>已启用</guimenu>以激活用户配额限制。您可以指定群集中用户可以使用的磁盘空间的<guimenu>最大大小</guimenu>，也可以选中<guimenu>无限制大小</guimenu>不设置大小限制。
      </para>
      <para>
       同样，可以指定用户可以储存在群集储存上的<guimenu>最大对象数</guimenu>，也可以选中<guimenu>无限制对象数</guimenu>以便用户可以存储任意数量的对象。
      </para>
      <figure>
       <title>用户配额</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="oa_rgw_userquota.png" width="70%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="oa_rgw_userquota.png" width="70%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       在<guimenu>桶配额</guimenu>部分中，设置当前用户的桶配额限制。
      </para>
      <figure>
       <title>桶配额</title>
       <mediaobject>
        <imageobject role="fo">
         <imagedata fileref="oa_rgw_bucketquota.png" width="70%" format="PNG"/>
        </imageobject>
        <imageobject role="html">
         <imagedata fileref="oa_rgw_bucketquota.png" width="70%" format="PNG"/>
        </imageobject>
       </mediaobject>
      </figure>
     </step>
     <step>
      <para>
       单击<guimenu>提交</guimenu>以确认。
      </para>
     </step>
    </procedure>
   </sect3>
   <sect3>
    <title>删除对象网关用户</title>
    <para>
     要删除一个或多个对象网关用户，请激活其最左侧列中的复选框，然后选择用户表格左上方的<guimenu>删除</guimenu>。
    </para>
   </sect3>
   <sect3 xml:id="oa.user.edit">
    <title>编辑对象网关用户</title>
    <para>
     要编辑对象网关用户的用户信息，请激活其最左侧列中的复选框，然后选择用户表格左上方的<guimenu>编辑</guimenu>，或者单击用户的 ID。您可以更改在<xref linkend="oa.rgw_user.add"/>中添加用户时输入的信息，以及下列额外信息：
    </para>
    <variablelist>
     <varlistentry>
      <term>子用户</term>
      <listitem>
       <para>
        添加、去除或编辑当前所编辑用户的子用户。
       </para>
       <figure>
        <title>添加子用户</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="oa_rgw_subuser_add.png" width="70%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="oa_rgw_subuser_add.png" width="70%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </figure>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>密钥</term>
      <listitem>
       <para>
        添加、去除或查看当前所编辑用户的访问密钥和机密密钥。
       </para>
       <para>
        您可为当前所编辑用户添加 S3 密钥，或查看其子用户的 Swift 密钥。
       </para>
       <figure>
        <title>查看 S3 密钥</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="oa_rgw_user_s3key_edit.png" width="70%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="oa_rgw_user_s3key_edit.png" width="70%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </figure>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>功能</term>
      <listitem>
       <para>
        添加或去除用户的功能。功能适用于<guimenu>桶</guimenu>、<guimenu>区域</guimenu>、<guimenu>用户</guimenu>、<guimenu>元数据</guimenu>和<guimenu>用量</guimenu>。每个功能值可以是“读取”、“写入”或“*”（表示读取和写入特权）其中之一。
       </para>
       <figure>
        <title>功能</title>
        <mediaobject>
         <imageobject role="fo">
          <imagedata fileref="oa_rgw_user_capabs.png" width="70%" format="PNG"/>
         </imageobject>
         <imageobject role="html">
          <imagedata fileref="oa_rgw_user_capabs.png" width="70%" format="PNG"/>
         </imageobject>
        </mediaobject>
       </figure>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect3>
   <sect3 xml:id="oa.ogw_bucket.list">
    <title>列出对象网关用户的桶</title>
    <tip>
     <para>
      桶是一种用于储存数据对象的机制。一个用户帐户可具有许多个桶，但是桶名称必须唯一。“桶”这个术语通常在 Amazon S3 API 中使用，而在 <phrase role="productname">OpenStack</phrase> Swift API 环境中使用的是“容器”。
     </para>
    </tip>
    <para>
     单击<menuchoice><guimenu>对象网关</guimenu><guimenu>桶</guimenu></menuchoice>可列出所有可用的对象网关桶。
    </para>
    <figure>
     <title>对象网关桶</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="os_ogw_bucket_list.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="os_ogw_bucket_list.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="oa.ogw_bucket.add">
    <title>为对象网关用户添加桶</title>
    <para>
     要添加新的桶，请单击桶表格左上方的<guimenu>添加</guimenu>，然后输入新的桶名称及相关的对象网关用户。单击<guimenu>提交</guimenu>以确认。
    </para>
    <figure>
     <title>添加新的桶</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_ogw_bucket_add.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_ogw_bucket_add.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="oa.ogw_bucket.view">
    <title>查看桶细节</title>
    <para>
     要查看有关对象网关桶的详细信息，请激活其在桶表格最左侧列中的复选框。
    </para>
    <figure>
     <title>桶细节</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_ogw_bucket_view.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_ogw_bucket_view.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
   </sect3>
   <sect3 xml:id="oa.ogw_bucket.edit">
    <title>编辑桶</title>
    <para>
     要编辑桶，请激活其在最左侧列中的复选框，然后选择桶表格左上方的<guimenu>编辑</guimenu>，或者单击它的名称。
    </para>
    <figure>
     <title>编辑对象网关桶</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_ogw_bucket_edit.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_ogw_bucket_edit.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     在编辑屏幕上，您可以更改桶所属的用户。
    </para>
   </sect3>
   <sect3 xml:id="oa.ogw_bucket.delete">
    <title>删除桶</title>
    <para>
     要删除一个或多个对象网关桶，请激活其在桶表格最左侧列中的复选框，然后选择桶表格左上方的<guimenu>删除</guimenu>。
    </para>
    <figure>
     <title>删除桶</title>
     <mediaobject>
      <imageobject role="fo">
       <imagedata fileref="oa_ogw_buckets_delete.png" width="70%" format="PNG"/>
      </imageobject>
      <imageobject role="html">
       <imagedata fileref="oa_ogw_buckets_delete.png" width="70%" format="PNG"/>
      </imageobject>
     </mediaobject>
    </figure>
    <para>
     要确认删除，请在<guimenu>删除桶</guimenu>弹出窗口中键入“是”，然后单击<guimenu>删除</guimenu>。
    </para>
    <warning>
     <title>请谨慎删除</title>
     <para>
      删除对象网关桶时，目前不会校验桶是否实际正在使用，例如由 NFS Ganesha 通过 S3 储存后端使用。
     </para>
    </warning>
   </sect3>
  </sect2>
 </sect1>
</chapter>
